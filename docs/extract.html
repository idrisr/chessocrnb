---

title: extract


keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
nb_path: "nbs/02_extract.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/02_extract.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>pip install -e ../
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Obtaining file:///Users/id/nbs/07-chessocrnb
Requirement already satisfied: pip in /Users/id/nbs/venv/lib/python3.7/site-packages (from chessocr==0.0.1) (21.1.1)
Requirement already satisfied: packaging in /Users/id/nbs/venv/lib/python3.7/site-packages (from chessocr==0.0.1) (20.9)
Requirement already satisfied: pyparsing&gt;=2.0.2 in /Users/id/nbs/venv/lib/python3.7/site-packages (from packaging-&gt;chessocr==0.0.1) (2.4.7)
Installing collected packages: chessocr
  Running setup.py develop for chessocr
Successfully installed chessocr-0.0.1
<span class="ansi-yellow-fg">WARNING: You are using pip version 21.1.1; however, version 21.1.2 is available.
You should consider upgrading via the &#39;/Users/id/nbs/venv/bin/python3.7 -m pip install --upgrade pip&#39; command.</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">chessocr.line</span> <span class="kn">import</span> <span class="n">Line</span><span class="p">,</span> <span class="n">partitionLines</span><span class="p">,</span> <span class="n">filterCloseLines</span>
<span class="kn">from</span> <span class="nn">chessocr.perspective</span> <span class="kn">import</span> <span class="n">getPerspective</span>
<span class="kn">from</span> <span class="nn">chessocr.util</span> <span class="kn">import</span> <span class="n">ratio</span>
<span class="kn">from</span> <span class="nn">chessocr.util</span> <span class="kn">import</span> <span class="n">showImage</span><span class="p">,</span> <span class="n">drawPerspective</span><span class="p">,</span> <span class="n">drawBoundaries</span><span class="p">,</span> <span class="n">drawContour</span><span class="p">,</span> <span class="n">writeDocumentationImage</span>
<span class="kn">from</span> <span class="nn">chessocr.util</span> <span class="kn">import</span> <span class="n">randomColor</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-intense-fg ansi-bold">---------------------------------------------------------------------------</span>
<span class="ansi-red-intense-fg ansi-bold">ModuleNotFoundError</span>                       Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">&lt;ipython-input-5-dd65a099ab47&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span>
<span class="ansi-green-intense-fg ansi-bold">----&gt; 1</span><span class="ansi-yellow-intense-fg ansi-bold"> </span><span class="ansi-green-intense-fg ansi-bold">from</span> chessocr<span class="ansi-yellow-intense-fg ansi-bold">.</span>line <span class="ansi-green-intense-fg ansi-bold">import</span> Line<span class="ansi-yellow-intense-fg ansi-bold">,</span> partitionLines<span class="ansi-yellow-intense-fg ansi-bold">,</span> filterCloseLines
<span class="ansi-green-fg">      2</span> <span class="ansi-green-intense-fg ansi-bold">from</span> chessocr<span class="ansi-yellow-intense-fg ansi-bold">.</span>perspective <span class="ansi-green-intense-fg ansi-bold">import</span> getPerspective
<span class="ansi-green-fg">      3</span> <span class="ansi-green-intense-fg ansi-bold">from</span> chessocr<span class="ansi-yellow-intense-fg ansi-bold">.</span>util <span class="ansi-green-intense-fg ansi-bold">import</span> ratio
<span class="ansi-green-fg">      4</span> <span class="ansi-green-intense-fg ansi-bold">from</span> chessocr<span class="ansi-yellow-intense-fg ansi-bold">.</span>util <span class="ansi-green-intense-fg ansi-bold">import</span> showImage<span class="ansi-yellow-intense-fg ansi-bold">,</span> drawPerspective<span class="ansi-yellow-intense-fg ansi-bold">,</span> drawBoundaries<span class="ansi-yellow-intense-fg ansi-bold">,</span> drawContour<span class="ansi-yellow-intense-fg ansi-bold">,</span> writeDocumentationImage
<span class="ansi-green-fg">      5</span> <span class="ansi-green-intense-fg ansi-bold">from</span> chessocr<span class="ansi-yellow-intense-fg ansi-bold">.</span>util <span class="ansi-green-intense-fg ansi-bold">import</span> randomColor

<span class="ansi-red-intense-fg ansi-bold">ModuleNotFoundError</span>: No module named &#39;chessocr&#39;</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="largestContour" class="doc_header"><code>largestContour</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>largestContour</code>(<strong><code>contours</code></strong>)</p>
</blockquote>
<p>Finds the contour with the largest area in the list.
:param contours: list of contours
:returns: the largest countour</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ignoreContours" class="doc_header"><code>ignoreContours</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L26" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ignoreContours</code>(<strong><code>img</code></strong>, <strong><code>contours</code></strong>, <strong><code>hierarchy</code></strong>=<em><code>None</code></em>, <strong><code>min_ratio_bounding</code></strong>=<em><code>0.6</code></em>, <strong><code>min_area_percentage</code></strong>=<em><code>0.01</code></em>, <strong><code>max_area_percentage</code></strong>=<em><code>0.4</code></em>)</p>
</blockquote>
<p>Filters a contour list based on some rules. If hierarchy != None,
only top-level contours are considered.
:param img: source image
:param contours: list of contours
:param hierarchy: contour hierarchy
:param min_ratio_bounding: minimum contour area vs. bounding box area ratio
:param min_area_percentage: minimum contour vs. image area percentage
:param max_area_percentage: maximum contour vs. image area percentage
:returns: a list with the unfiltered countour ids</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extractGrid" class="doc_header"><code>extractGrid</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L73" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extractGrid</code>(<strong><code>img</code></strong>, <strong><code>nvertical</code></strong>, <strong><code>nhorizontal</code></strong>, <strong><code>threshold1</code></strong>=<em><code>50</code></em>, <strong><code>threshold2</code></strong>=<em><code>150</code></em>, <strong><code>apertureSize</code></strong>=<em><code>3</code></em>, <strong><code>hough_threshold_step</code></strong>=<em><code>20</code></em>, <strong><code>hough_threshold_min</code></strong>=<em><code>50</code></em>, <strong><code>hough_threshold_max</code></strong>=<em><code>150</code></em>)</p>
</blockquote>
<p>Finds the grid lines in a board image.
:param img: board image
:param nvertical: number of vertical lines
:param nhorizontal: number of horizontal lines
:returns: a pair (horizontal, vertical). Both elements are lists with the lines' positions.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extractTiles" class="doc_header"><code>extractTiles</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L113" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extractTiles</code>(<strong><code>img</code></strong>, <strong><code>grid</code></strong>, <strong><code>w</code></strong>, <strong><code>h</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extractPerspective" class="doc_header"><code>extractPerspective</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L137" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extractPerspective</code>(<strong><code>image</code></strong>, <strong><code>perspective</code></strong>, <strong><code>w</code></strong>, <strong><code>h</code></strong>, <strong><code>dest</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="extractBoards" class="doc_header"><code>extractBoards</code><a href="https://github.com/idrisr/chessocr/tree/master/chessocr/extract.py#L152" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>extractBoards</code>(<strong><code>img</code></strong>, <strong><code>w</code></strong>, <strong><code>h</code></strong>)</p>
</blockquote>
<p>Extracts all boards from an image. This function applies perspective correction.
:param img: source image
:param w: output width
:param h: output height
:returns: a list the extracted board images</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

